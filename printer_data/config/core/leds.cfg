# Complete replacement configuration for your Anthead LEDs
# This addresses the specific issue with LED #3 having swapped channels

[neopixel anthead_leds]
pin: EBBCan:PD3
chain_count: 3
color_order: GRBW
initial_RED: 0.8
initial_GREEN: 0.0
initial_BLUE: 0.8
initial_WHITE: 0.0

# These are direct status setting macros that bypass the complex macro system
# Each one explicitly sets the correct colors for each LED

[gcode_macro STATUS_OFF]
gcode:
    # All LEDs off
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0 WHITE=0 INDEX=1 TRANSMIT=0
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0 WHITE=0 INDEX=2 TRANSMIT=0 
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0 WHITE=0 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_READY]
gcode:
    # Purple for ready state (logo LED)
    SET_LED LED=anthead_leds RED=0.8 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # Purple for nozzle LED 1
    SET_LED LED=anthead_leds RED=0.8 GREEN=0 BLUE=0.8 WHITE=0 INDEX=2 TRANSMIT=0
    # Purple for nozzle LED 2 (using green channel for red)
    SET_LED LED=anthead_leds RED=0 GREEN=0.8 BLUE=0.8 WHITE=0 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_HEATING]
gcode:
    # Orange for heating (logo LED)
    SET_LED LED=anthead_leds RED=1.0 GREEN=0.4 BLUE=0 WHITE=0 INDEX=1 TRANSMIT=0
    # Orange for nozzle LED 1
    SET_LED LED=anthead_leds RED=1.0 GREEN=0.4 BLUE=0 WHITE=0 INDEX=2 TRANSMIT=0
    # Orange for nozzle LED 2 (using green channel for red)
    SET_LED LED=anthead_leds RED=0 GREEN=1.0 BLUE=0 WHITE=0 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_LEVELING]
gcode:
    # Blue for leveling (logo LED)
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # White for nozzle LED 1
    SET_LED LED=anthead_leds RED=1 GREEN=1 BLUE=1 WHITE=1 INDEX=2 TRANSMIT=0
    # White for nozzle LED 2
    SET_LED LED=anthead_leds RED=0 GREEN=1 BLUE=1 WHITE=1 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_HOMING]
gcode:
    # Blue for homing (logo LED)
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # White for nozzle LED 1
    SET_LED LED=anthead_leds RED=1 GREEN=1 BLUE=1 WHITE=1 INDEX=2 TRANSMIT=0
    # White for nozzle LED 2
    SET_LED LED=anthead_leds RED=0 GREEN=1 BLUE=1 WHITE=1 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_CLEANING]
gcode:
    # Blue for cleaning (logo LED)
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # White for nozzle LED 1
    SET_LED LED=anthead_leds RED=1 GREEN=1 BLUE=1 WHITE=1 INDEX=2 TRANSMIT=0
    # White for nozzle LED 2
    SET_LED LED=anthead_leds RED=0 GREEN=1 BLUE=1 WHITE=1 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_MESHING]
gcode:
    # Blue for meshing (logo LED)
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # White for nozzle LED 1
    SET_LED LED=anthead_leds RED=1 GREEN=1 BLUE=1 WHITE=1 INDEX=2 TRANSMIT=0
    # White for nozzle LED 2
    SET_LED LED=anthead_leds RED=0 GREEN=1 BLUE=1 WHITE=1 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_CALIBRATING_Z]
gcode:
    # Blue for calibrating (logo LED)
    SET_LED LED=anthead_leds RED=0 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # White for nozzle LED 1
    SET_LED LED=anthead_leds RED=1 GREEN=1 BLUE=1 WHITE=1 INDEX=2 TRANSMIT=0
    # White for nozzle LED 2
    SET_LED LED=anthead_leds RED=0 GREEN=1 BLUE=1 WHITE=1 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_PRINTING]
gcode:
    # Purple for printing (logo LED)
    SET_LED LED=anthead_leds RED=0.8 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    # White for nozzle LED 1
    SET_LED LED=anthead_leds RED=1 GREEN=1 BLUE=1 WHITE=1 INDEX=2 TRANSMIT=0
    # White for nozzle LED 2
    SET_LED LED=anthead_leds RED=0 GREEN=1 BLUE=1 WHITE=1 INDEX=3 TRANSMIT=1

[gcode_macro STATUS_ERROR]
gcode:
    # Red for error (logo LED)
    SET_LED LED=anthead_leds RED=1.0 GREEN=0 BLUE=0 WHITE=0 INDEX=1 TRANSMIT=0
    # Red for nozzle LED 1
    SET_LED LED=anthead_leds RED=1.0 GREEN=0 BLUE=0 WHITE=0 INDEX=2 TRANSMIT=0
    # Red for nozzle LED 2 (using green channel for red)
    SET_LED LED=anthead_leds RED=0 GREEN=1.0 BLUE=0 WHITE=0 INDEX=3 TRANSMIT=1

# Simple test macro to set all LEDs to purple
[gcode_macro TEST_PURPLE_FIXED]
gcode:
    # Purple for all LEDs, with special handling for LED 3
    SET_LED LED=anthead_leds RED=0.8 GREEN=0 BLUE=0.8 WHITE=0 INDEX=1 TRANSMIT=0
    SET_LED LED=anthead_leds RED=0.8 GREEN=0 BLUE=0.8 WHITE=0 INDEX=2 TRANSMIT=0
    SET_LED LED=anthead_leds RED=0 GREEN=0.8 BLUE=0.8 WHITE=0 INDEX=3 TRANSMIT=1